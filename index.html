<!DOCTYPE html>
<html lang="en">
<head>
  <!--
    InfantContrast.com — High-Contrast Baby Carousel (single-file MVP)
    No analytics yet (CSP kept strict). Add GA or Plausible later and update CSP in `_headers`.
  -->
  <meta charset="utf-8" />
  <meta name="viewport" content="width=device-width, initial-scale=1, viewport-fit=cover" />

  <!-- SEO -->
  <title>Infant Contrast — High-Contrast Baby Carousel (Free)</title>
  <meta name="description" content="Free, full-screen, swipeable black & white visuals for newborns and young infants. Tap or swipe to cycle soothing, high-contrast patterns." />
  <link rel="canonical" href="https://infantcontrast.com/" />

  <!-- Theme -->
  <meta name="theme-color" content="#000000" />
  <meta name="color-scheme" content="light dark" />

  <!-- Open Graph / Twitter -->
  <meta property="og:type" content="website">
  <meta property="og:title" content="Infant Contrast — High-Contrast Baby Carousel">
  <meta property="og:description" content="Free, swipeable black & white visuals for infants.">
  <meta property="og:url" content="https://infantcontrast.com/">
  <meta property="og:image" content="https://infantcontrast.com/og-image.png">
  <meta name="twitter:card" content="summary_large_image">
  <meta name="twitter:title" content="Infant Contrast — High-Contrast Baby Carousel">
  <meta name="twitter:description" content="Free, swipeable black & white visuals for infants.">
  <meta name="twitter:image" content="https://infantcontrast.com/og-image.png">

  <!-- JSON-LD basic Website markup -->
  <script type="application/ld+json">
  {
    "@context": "https://schema.org",
    "@type": "WebSite",
    "name": "Infant Contrast",
    "url": "https://infantcontrast.com/"
  }
  </script>

  <style>
    *, *::before, *::after { box-sizing: border-box; }
    html, body {
      height: 100%;
      margin: 0;
      background: #000;
      color: #fff;
      overscroll-behavior: none;
      -webkit-text-size-adjust: 100%;
    }
    body {
      -webkit-tap-highlight-color: transparent;
      touch-action: pan-y pinch-zoom;
      font-family: system-ui, -apple-system, Segoe UI, Roboto, Ubuntu, Cantarell, Noto Sans, Helvetica, Arial, sans-serif;
    }

    .app { position: fixed; inset: 0; display: grid; grid-template-rows: 1fr auto; background: #000; }
    .stage { position: relative; overflow: hidden; width: 100vw; height: 100svh; height: 100vh; touch-action: none; user-select: none; }
    .track { display: flex; width: 100%; height: 100%; will-change: transform; transition: transform 220ms ease-out; }
    .slide { flex: 0 0 100%; height: 100%; display: grid; place-items: center; background: #000; }
    .visual { width: min(92vw, 92vh); height: auto; max-height: 92vh; display: block; }
    .hint { position: absolute; inset-inline: 0; bottom: 0.75rem; text-align: center; font-size: 0.85rem; opacity: 0.65; pointer-events: none; }

    .adbar { position: sticky; bottom: 0; width: 100%; background: #0a0a0a; border-top: 1px solid #111; padding: 6px 10px; display: flex; align-items: center; justify-content: center; min-height: 44px; }
    .adbar small { opacity: 0.7; }

    ::-webkit-scrollbar { width: 0; height: 0; }
  </style>
</head>
<body>
  <main class="app" aria-label="High-contrast image carousel for infants">
    <section class="stage" id="stage" role="region" aria-roledescription="carousel" aria-label="High-contrast visuals — slide 1 of 7" tabindex="0">
      <div class="track" id="track"></div>
      <div class="hint" aria-hidden="true">Swipe left/right • Arrow keys also work</div>
    </section>
    <aside class="adbar" aria-label="Advertisement area">
      <small>Ad space (placeholder). Your ad will appear here once configured.</small>
    </aside>
  </main>

  <script>
    "use strict";
    const visuals = [
      () => `
        <svg class="visual" viewBox="0 0 100 100" role="img" aria-label="Concentric circles">
          <rect width="100" height="100" fill="#000"/>
          <circle cx="50" cy="50" r="45" fill="#fff"/>
          <circle cx="50" cy="50" r="35" fill="#000"/>
          <circle cx="50" cy="50" r="25" fill="#fff"/>
          <circle cx="50" cy="50" r="15" fill="#000"/>
          <circle cx="50" cy="50" r="7"  fill="#fff"/>
        </svg>
      `,
      () => `
        <svg class="visual" viewBox="0 0 100 100" role="img" aria-label="Checkerboard">
          <defs>
            <pattern id="chk" width="20" height="20" patternUnits="userSpaceOnUse">
              <rect width="20" height="20" fill="#fff"/>
              <rect width="10" height="10" x="0" y="0" fill="#000"/>
              <rect width="10" height="10" x="10" y="10" fill="#000"/>
            </pattern>
          </defs>
          <rect width="100" height="100" fill="url(#chk)"/>
        </svg>
      `,
      () => `
        <svg class="visual" viewBox="0 0 100 100" role="img" aria-label="Spiral">
          <rect width="100" height="100" fill="#fff"/>
          <path d="M50,10
                   a40,40 0 1,1 -0.1,0
                   m0,10 a30,30 0 1,0 0.1,0
                   m0,10 a20,20 0 1,1 -0.1,0
                   m0,10 a10,10 0 1,0 0.1,0"
                fill="none" stroke="#000" stroke-width="4" stroke-linecap="round"/>
        </svg>
      `,
      () => `
        <svg class="visual" viewBox="0 0 100 100" role="img" aria-label="Radial rays">
          <rect width="100" height="100" fill="#000"/>
          <g stroke="#fff" stroke-width="6" stroke-linecap="round">
            ${Array.from({length:16}, (_,i)=>{
              const a = (i / 16) * Math.PI * 2;
              const x = 50 + Math.cos(a)*45;
              const y = 50 + Math.sin(a)*45;
              return `<line x1="50" y1="50" x2="${x.toFixed(2)}" y2="${y.toFixed(2)}" />`;
            }).join("")}
          </g>
        </svg>
      `,
      () => `
        <svg class="visual" viewBox="0 0 100 100" role="img" aria-label="Bold stripes">
          <rect width="100" height="100" fill="#fff"/>
          ${Array.from({length:10}, (_,i)=>{
            const y = i*10;
            return i%2===0
              ? `<rect x="0" y="${y}" width="100" height="10" fill="#000"/>`
              : ``;
          }).join("")}
        </svg>
      `,
      () => `
        <svg class="visual" viewBox="0 0 100 100" role="img" aria-label="Dots grid">
          <rect width="100" height="100" fill="#000"/>
          ${Array.from({length:10}, (_,r)=>Array.from({length:10}, (_,c)=>{
            const x = 10 + c*8;
            const y = 10 + r*8;
            const fill = (r+c)%2===0 ? "#fff" : "#000";
            return `<circle cx="${x}" cy="${y}" r="3.2" fill="${fill}" stroke="#fff" stroke-width="0.5"/>`;
          }).join("")).join("")}
        </svg>
      `,
      () => `
        <svg class="visual" viewBox="0 0 100 100" role="img" aria-label="Target">
          <rect width="100" height="100" fill="#fff"/>
          <circle cx="50" cy="50" r="42" fill="#000"/>
          <circle cx="50" cy="50" r="28" fill="#fff"/>
          <circle cx="50" cy="50" r="14" fill="#000"/>
        </svg>
      `
    ];

    const trackEl = document.getElementById("track");
    const stageEl = document.getElementById("stage");

    const slideCount = visuals.length;
    let index = 0;

    const slides = visuals.map((makeSvg, i) => {
      const el = document.createElement("div");
      el.className = "slide";
      el.setAttribute("role", "group");
      el.setAttribute("aria-roledescription", "slide");
      el.setAttribute("aria-label", `Slide ${i+1} of ${slideCount}`);
      el.innerHTML = makeSvg();
      return el;
    });
    slides.forEach(s => trackEl.appendChild(s));

    function applyTransform(px) {
      const x = Math.max(Math.min(px, 2000), -2000);
      trackEl.style.transform = `translate3d(${x}px, 0, 0)`;
    }

    function goTo(i, {announce=true} = {}) {
      index = (i + slideCount) % slideCount;
      const offset = -index * stageEl.clientWidth;
      applyTransform(offset);
      if (announce) {
        stageEl.setAttribute("aria-label", `High-contrast visuals — slide ${index+1} of ${slideCount}`);
      }
      trackEvent("slide_change", { index });
    }

    goTo(0, {announce:false});

    let resizeRAF = 0;
    window.addEventListener("resize", () => {
      cancelAnimationFrame(resizeRAF);
      resizeRAF = requestAnimationFrame(() => goTo(index, {announce:false}));
    }, { passive: true });

    let dragging = false;
    let startX = 0;
    let currentX = 0;
    let startOffset = 0;
    const SWIPE_THRESHOLD = 40;

    function onPointerDown(e) {
      if (e.pointerType === "mouse" && e.button !== 0) return;
      dragging = true;
      stageEl.setPointerCapture(e.pointerId);
      startX = e.clientX;
      currentX = startX;
      startOffset = -index * stageEl.clientWidth;
      trackEl.style.transition = "none";
    }

    function onPointerMove(e) {
      if (!dragging) return;
      currentX = e.clientX;
      const dx = currentX - startX;
      applyTransform(startOffset + dx);
      e.preventDefault();
    }

    function onPointerUp() {
      if (!dragging) return;
      dragging = false;
      trackEl.style.transition = "transform 220ms ease-out";
      const dx = currentX - startX;
      if (dx <= -SWIPE_THRESHOLD) {
        goTo(index + 1);
      } else if (dx >= SWIPE_THRESHOLD) {
        goTo(index - 1);
      } else {
        goTo(index, {announce:false});
      }
    }

    stageEl.addEventListener("pointerdown", onPointerDown);
    stageEl.addEventListener("pointermove", onPointerMove);
    stageEl.addEventListener("pointerup", onPointerUp);
    stageEl.addEventListener("pointercancel", onPointerUp);
    stageEl.addEventListener("lostpointercapture", onPointerUp);

    stageEl.addEventListener("keydown", (e) => {
      if (e.key === "ArrowLeft") { e.preventDefault(); goTo(index - 1); }
      if (e.key === "ArrowRight") { e.preventDefault(); goTo(index + 1); }
    });

    function trackEvent(action, payload) {
      if (typeof window.gtag === "function") {
        window.gtag('event', action, payload || {});
      }
    }
  </script>
</body>
</html>
